---
import 'tippy.js/dist/tippy.css'
---

<script>
  import tippy from 'tippy.js'
  document.addEventListener('astro:page-load', () => {
    const tips = document.querySelectorAll('[data-tip]')

    const placement =
      tips.length > 0 && tips[0].getAttribute('data-tip-placement')
        ? (tips[0].getAttribute('data-tip-placement') as any)
        : 'top'

    tips.forEach((tip) => {
      if (tip.tagName == 'SPAN' || tip.tagName == 'DIV') {
        tip.setAttribute('tabindex', '0')
      }
      tippy(tip, {
        content: tip.attributes.getNamedItem('data-tip')?.textContent || '',
        placement,
        animation: 'shift-away',
      })
    })
  })
</script>
